

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weather_web</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #6c5ce7 100%);
min-height: 100vh;
color: #333;
overflow-x: hidden;
}

.container {
width: 100%;
max-width: 1400px;
margin: 0 auto;
padding: 20px;

display: flex;
flex-direction: column;
align-items: center;
}

.header {
text-align: center;
margin-bottom: 30px;
animation: fadeInDown 1s ease-out;
width: 100%;
}

.header h1 {
color: white;
font-size: 2.5rem;
text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
margin-bottom: 10px;
}

.header p {
color: white;
font-size: 1.2rem;
opacity: 0.9;
}

.search-container {
background: rgba(255,255,255,0.95);
padding: 30px;
border-radius: 25px;
box-shadow: 0 15px 35px rgba(0,0,0,0.1);

margin-bottom: 30px;
backdrop-filter: blur(10px);
animation: fadeInUp 1s ease-out;
width: 100%;
max-width: 600px;
}

.search-box {
display: flex;
gap: 15px;
justify-content: center;
align-items: center;
width: 100%;
}

input {
padding: 15px 20px;
border: 2px solid #0984e3;
border-radius: 50px;
font-size: 16px;
flex: 1;
min-width: 200px;
transition: all 0.3s ease;
text-align: center;
}

input:focus {
outline: none;
border-color: #6c5ce7;
box-shadow: 0 0 20px rgba(108,92,231,0.3);

transform: scale(1.02);
}

button {
padding: 15px 30px;
background: linear-gradient(45deg, #0984e3, #74b9ff);
color: white;
border: none;
border-radius: 50px;
font-size: 16px;
cursor: pointer;
transition: all 0.3s ease;
font-weight: bold;
box-shadow: 0 5px 15px rgba(0,0,0,0.2);
white-space: nowrap;
}

button:hover {
transform: translateY(-2px);
box-shadow: 0 8px 25px rgba(0,0,0,0.3);
background: linear-gradient(45deg, #74b9ff, #0984e3);
}

.main-weather {
background: rgba(255,255,255,0.95);
padding: 40px;
border-radius: 25px;
box-shadow: 0 15px 35px rgba(0,0,0,0.1);

margin-bottom: 30px;
text-align: center;
backdrop-filter: blur(10px);
animation: slideInLeft 1s ease-out;
width: 100%;
max-width: 800px;
}

.weather-icon-main {
width: 120px;
height: 120px;
margin: 20px auto;
animation: bounce 2s infinite;
display: block;
}

.temperature {
font-size: 4rem;
font-weight: bold;
color: #0984e3;
text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
margin: 20px 0;
}

.description {
font-size: 1.5rem;
color: #6c5ce7;
margin: 20px 0;
}

.weather-details {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 20px;
margin-top: 30px;
width: 100%;
}

.detail-card {
background: linear-gradient(45deg, #74b9ff, #0984e3);
color: white;
padding: 20px;
border-radius: 15px;
text-align: center;
box-shadow: 0 8px 20px rgba(0,0,0,0.15);
transition: transform 0.3s ease;
}

.detail-card:hover {
transform: translateY(-5px);
}

.detail-card h3 {
margin-bottom: 10px;
font-size: 1rem;
}

.detail-card p {

font-size: 1.2rem;
font-weight: bold;
}

.hourly-forecast {
background: rgba(255,255,255,0.95);
padding: 30px;
border-radius: 25px;
box-shadow: 0 15px 35px rgba(0,0,0,0.1);
margin-bottom: 30px;
backdrop-filter: blur(10px);
animation: slideInRight 1s ease-out;
width: 100%;
max-width: 1200px;
}

.hourly-container {
display: flex;
overflow-x: auto;
gap: 15px;
padding: 20px 0;
scrollbar-width: thin;
}

.hourly-container::-webkit-scrollbar {
height: 8px;
}

.hourly-container::-webkit-scrollbar-track {
background: #f1f1f1;

border-radius: 10px;
}

.hourly-container::-webkit-scrollbar-thumb {
background: #0984e3;
border-radius: 10px;
}

.hourly-item {
min-width: 120px;
background: linear-gradient(45deg, #ff7675, #fd79a8);
color: white;
padding: 20px;
border-radius: 15px;
text-align: center;
box-shadow: 0 5px 15px rgba(0,0,0,0.2);
transition: transform 0.3s ease;
flex-shrink: 0;
}

.hourly-item:hover {
transform: scale(1.05);
}

.daily-forecast {
background: rgba(255,255,255,0.95);
padding: 30px;
border-radius: 25px;
box-shadow: 0 15px 35px rgba(0,0,0,0.1);

margin-bottom: 30px;
backdrop-filter: blur(10px);
animation: fadeInUp 1s ease-out 0.5s both;
width: 100%;
max-width: 1200px;
}

.daily-container {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 20px;
width: 100%;
}

.daily-item {
background: linear-gradient(45deg, #fdcb6e, #e17055);
color: white;
padding: 25px;
border-radius: 15px;
text-align: center;
box-shadow: 0 8px 20px rgba(0,0,0,0.15);
transition: all 0.3s ease;
}

.daily-item:hover {
transform: translateY(-5px);
box-shadow: 0 12px 30px rgba(0,0,0,0.25);
}


.world-weather {
background: rgba(255,255,255,0.95);
padding: 30px;
border-radius: 25px;
box-shadow: 0 15px 35px rgba(0,0,0,0.1);
backdrop-filter: blur(10px);
animation: fadeInUp 1s ease-out 0.7s both;
width: 100%;
max-width: 1200px;
}

.world-cities {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 20px;
margin-top: 20px;
width: 100%;
}

.city-card {
background: linear-gradient(45deg, #00b894, #00cec9);
color: white;
padding: 25px;
border-radius: 15px;
text-align: center;
box-shadow: 0 8px 20px rgba(0,0,0,0.15);
transition: all 0.3s ease;

}

.city-card:hover {
transform: scale(1.02);
box-shadow: 0 12px 30px rgba(0,0,0,0.25);
}

.loading {
display: none;
text-align: center;
padding: 40px;
width: 100%;
}

.spinner {
width: 50px;
height: 50px;
border: 5px solid #f3f3f3;
border-top: 5px solid #0984e3;
border-radius: 50%;
animation: spin 1s linear infinite;
margin: 0 auto 20px;
}

.error {
background: linear-gradient(45deg, #d63031, #e84393);
color: white;
padding: 20px;
border-radius: 15px;

text-align: center;
margin: 20px 0;
box-shadow: 0 5px 15px rgba(0,0,0,0.2);
width: 100%;
max-width: 600px;
}

.section-title {
font-size: 2rem;
color: #0984e3;
text-align: center;
margin-bottom: 20px;
text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.weather-icon-small {
width: 50px;
height: 50px;
display: block;
margin: 0 auto;
}

@keyframes fadeInDown {
from { opacity: 0; transform: translateY(-50px); }
to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInUp {
from { opacity: 0; transform: 

translateY(50px); }
to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInLeft {
from { opacity: 0; transform: translateX(-100px); }
to { opacity: 1; transform: translateX(0); }
}

@keyframes slideInRight {
from { opacity: 0; transform: translateX(100px); }
to { opacity: 1; transform: translateX(0); }
}

@keyframes bounce {
0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
40% { transform: translateY(-10px); }
60% { transform: translateY(-5px); }
}

@keyframes spin {
0% { transform: rotate(0deg); }
100% { transform: rotate(360deg); }
}

/* Responsive Design - تبلت */
@media (max-width: 1024px) {

.container {
padding: 15px;
}

.weather-details {
grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
gap: 15px;
}

.world-cities {
grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
gap: 15px;
}

.daily-container {
grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
gap: 15px;
}
}

/* Responsive Design - موبایل متوسط */
@media (max-width: 768px) {
.container {
padding: 15px;
}

.header h1 {

font-size: 2rem;
}

.header p {
font-size: 1rem;
}

.search-container {
padding: 20px;
}

.search-box {
flex-direction: column;
gap: 15px;
}

input {
width: 100%;
min-width: auto;
}

button {
width: 100%;
}

.main-weather {
padding: 25px;
}

.temperature {

font-size: 3rem;
}

.description {
font-size: 1.3rem;
}

.weather-details {
grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
gap: 15px;
}

.detail-card {
padding: 15px;
}

.hourly-forecast,
.daily-forecast,
.world-weather {
padding: 20px;
}

.section-title {
font-size: 1.7rem;
}

.daily-container {
grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));

gap: 15px;
}

.world-cities {
grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
gap: 15px;
}

.city-card {
padding: 20px;
}

.daily-item {
padding: 20px;
}
}

/* Responsive Design - موبایل کوچک */
@media (max-width: 480px) {
.container {
padding: 10px;
}

.header h1 {
font-size: 1.8rem;
}

.header p {
font-size: 0.9rem;

}

.search-container {
padding: 15px;
}

.main-weather {
padding: 20px;
}

.temperature {
font-size: 2.5rem;
}

.description {
font-size: 1.2rem;
}

.weather-details {
grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
gap: 10px;
}

.detail-card {
padding: 12px;
font-size: 0.9rem;
}

.detail-card h3 {

font-size: 0.9rem;
}

.detail-card p {
font-size: 1rem;
}

.daily-container {
grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
gap: 12px;
}

.world-cities {
grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
gap: 12px;
}

.hourly-item {
min-width: 100px;
padding: 15px;
}

.city-card {
padding: 15px;
}

.daily-item {
padding: 15px;

}

.section-title {
font-size: 1.5rem;
}

.hourly-forecast,
.daily-forecast,
.world-weather {
padding: 15px;
}
}

/* Responsive Design - موبایل خیلی کوچک */
@media (max-width: 320px) {
.container {
padding: 8px;
}

.weather-details {
grid-template-columns: 1fr 1fr;
gap: 8px;
}

.world-cities {
grid-template-columns: 1fr;
gap: 10px;
}

.daily-container {

grid-template-columns: 1fr;
gap: 10px;
}

.detail-card {
padding: 10px;
font-size: 0.8rem;
}

.detail-card h3 {
font-size: 0.8rem;
margin-bottom: 5px;
}

.detail-card p {
font-size: 0.9rem;
}

.hourly-item {
min-width: 90px;
padding: 12px;
}

.temperature {
font-size: 2rem;
}

.section-title {
font-size: 1.3rem;
}

}

/* بهبود برای صفحه‌نمایش‌های بزرگ */
@media (min-width: 1400px) {
.container {
max-width: 1600px;
}

.weather-details {
grid-template-columns: repeat(6, 1fr);
}

.world-cities {
grid-template-columns: repeat(4, 1fr);
}

.daily-container {
grid-template-columns: repeat(5, 1fr);
}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>🌤️ آب‌وهوای پیشرفته</h1>
<p>پیش‌بینی کامل آب‌وهوا برای سراسر جهان</p>
</div>

<div class="search-container">

<div class="search-box">
<input type="text" id="cityInput" placeholder="نام شهر یا کشور را وارد کنید...">
<button onclick="getWeather()">🔍 جستجو</button>
</div>
</div>

<div class="loading" id="loading">
<div class="spinner"></div>
<p>در حال دریافت اطلاعات آب‌وهوا...</p>
</div>

<div id="mainWeather"></div>
<div id="hourlyForecast"></div>
<div id="dailyForecast"></div>

<div class="world-weather">
<h2 class="section-title">🌍 آب‌وهوای شهرهای مهم جهان</h2>
<div class="world-cities" id="worldCities"></div>
</div>
</div>

<script>
const apiKey = "ee24450910228c08cc8613af1e387e85";

// شهرهای مهم جهان

const worldCities = [
{ name: "تهران", country: "ایران", query: "Tehran,IR" },
{ name: "لندن", country: "انگلستان", query: "London,GB" },
{ name: "نیویورک", country: "آمریکا", query: "New York,US" },
{ name: "توکیو", country: "ژاپن", query: "Tokyo,JP" },
{ name: "پاریس", country: "فرانسه", query: "Paris,FR" },
{ name: "دبی", country: "امارات", query: "Dubai,AE" },
{ name: "استانبول", country: "ترکیه", query: "Istanbul,TR" },
{ name: "مسکو", country: "روسیه", query: "Moscow,RU" }
];

// تابع برای دریافت آیکون صحیح آب‌وهوا
function getWeatherIcon(iconCode) {
if (iconCode) {
return `https://openweathermap.org/img/wn/${iconCode}@2x.png`;
}
return 'https://openweathermap.org/img/wn/01d@2x.png';
}

// تابع برای دریافت آیکون کوچک

function getSmallWeatherIcon(iconCode) {
if (iconCode) {
return `https://openweathermap.org/img/wn/${iconCode}.png`;
}
return 'https://openweathermap.org/img/wn/01d.png';
}

document.getElementById("cityInput").addEventListener("keypress", function(event) {
if (event.key === "Enter") {
getWeather();
}
});

async function getWeather() {
const city = document.getElementById("cityInput").value.trim();
if (!city) return;

showLoading(true);
try {
const currentWeather = await fetchCurrentWeather(city);
const forecast = await fetchForecast(city);

displayMainWeather(currentWeather);
displayHourlyForecast(forecast);

displayDailyForecast(forecast);
} catch (error) {
displayError(error.message);
} finally {
showLoading(false);
}
}

async function fetchCurrentWeather(city) {
const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=fa`;
const response = await fetch(url);
if (!response.ok) {
throw new Error("شهر پیدا نشد یا خطا در دریافت اطلاعات");
}
return await response.json();
}

async function fetchForecast(city) {
const url = `https://api.openweathermap.org/data/2.5/forecast?q=${city}&appid=${apiKey}&units=metric&lang=fa`;
const response = await fetch(url);
if (!response.ok) {
throw new Error("خطا در دریافت پیش‌بینی");
}
return await response.json();
}


function displayMainWeather(data) {
const temp = Math.round(data.main.temp);
const description = data.weather[0].description;
const icon = data.weather[0].icon;
const iconUrl = getWeatherIcon(icon);

const html = `
<div class="main-weather">
<h2 style="color: #0984e3; font-size: 2rem; margin-bottom: 20px;">${data.name}, ${data.sys.country}</h2>
<img class="weather-icon-main" src="${iconUrl}" alt="${description}" onerror="this.src='https://openweathermap.org/img/wn/01d@2x.png'">
<div class="temperature">${temp}°C</div>
<div class="description">${description}</div>
<div class="weather-details">
<div class="detail-card">
<h3>🌡️ احساس دما</h3>
<p>${Math.round(data.main.feels_like)}°C</p>
</div>
<div class="detail-card">
<h3>💧 رطوبت</h3>
<p>${data.main.humidity}%</p>
</div>

<div class="detail-card">
<h3>💨 سرعت باد</h3>
<p>${data.wind.speed} م/ث</p>
</div>
<div class="detail-card">
<h3>🔽 فشار هوا</h3>
<p>${data.main.pressure} هکتوپاسکال</p>
</div>
<div class="detail-card">
<h3>👁️ دید</h3>
<p>${data.visibility ? (data.visibility/1000).toFixed(1) + ' کیلومتر' : 'نامشخص'}</p>
</div>
<div class="detail-card">
<h3>☁️ ابرناکی</h3>
<p>${data.clouds.all}%</p>
</div>
</div>
</div>
`;

document.getElementById("mainWeather").innerHTML = html;
}

function displayHourlyForecast(data) {
const hourlyData = data.list.slice(0, 8);
let html = `
<div class="hourly-forecast">
<h2 class="section-title">⏰ پیش‌بینی ساعتی</

h2>
<div class="hourly-container">
`;

hourlyData.forEach(item => {
const time = new Date(item.dt * 1000);
const hour = time.getHours();
const temp = Math.round(item.main.temp);
const icon = item.weather[0].icon;
const iconUrl = getSmallWeatherIcon(icon);

html += `
<div class="hourly-item">
<div style="font-weight: bold; margin-bottom: 10px;">${hour}:00</div>
<img class="weather-icon-small" src="${iconUrl}" alt="${item.weather[0].description}" onerror="this.src='https://openweathermap.org/img/wn/01d.png'">
<div style="font-size: 1.2rem; font-weight: bold;">${temp}°C</div>
<div style="font-size: 0.9rem; opacity: 0.9;">${item.weather[0].description}</div>
</div>
`;
});

html += `</div></div>`;
document.getElementById("hourlyForecast"

).innerHTML = html;
}

function displayDailyForecast(data) {
const dailyData = {};
data.list.forEach(item => {
const date = new Date(item.dt * 1000);
const day = date.toDateString();
if (!dailyData[day]) {
dailyData[day] = {
date: date,
temps: [],
descriptions: [],
icons: [],
humidity: [],
wind: []
};
}
dailyData[day].temps.push(item.main.temp);
dailyData[day].descriptions.push(item.weather[0].description);
dailyData[day].icons.push(item.weather[0].icon);
dailyData[day].humidity.push(item.main.humidity);
dailyData[day].wind.push(item.wind.speed);
});

const days = Object.values(dailyData).slice(0, 5);

let html = `
<div class="daily-forecast">
<h2 class="section-title">📅 پیش‌بینی 5 روز آینده</h2>
<div class="daily-container">
`;

days.forEach((day, index) => {
const dayName = index === 0 ? 'امروز' : new Intl.DateTimeFormat('fa-IR', { weekday: 'long' }).format(day.date);
const maxTemp = Math.round(Math.max(...day.temps));
const minTemp = Math.round(Math.min(...day.temps));
const avgHumidity = Math.round(day.humidity.reduce((a, b) => a + b) / day.humidity.length);
const avgWind = (day.wind.reduce((a, b) => a + b) / day.wind.length).toFixed(1);

// انتخاب آیکون غالب
const iconCounts = {};
day.icons.forEach(icon => {
iconCounts[icon] = (iconCounts[icon] || 0) + 1;
});
const dominantIcon = Object.keys(iconCounts).reduce((a, b) => iconCounts[a] > iconCounts[b] ? a : b);
const iconUrl = 

getWeatherIcon(dominantIcon);

// انتخاب توضیح غالب
const descCounts = {};
day.descriptions.forEach(desc => {
descCounts[desc] = (descCounts[desc] || 0) + 1;
});
const dominantDesc = Object.keys(descCounts).reduce((a, b) => descCounts[a] > descCounts[b] ? a : b);

html += `
<div class="daily-item">
<h3 style="margin-bottom: 15px;">${dayName}</h3>
<img class="weather-icon-small" src="${iconUrl}" alt="${dominantDesc}" style="margin-bottom: 10px;" onerror="this.src='https://openweathermap.org/img/wn/01d@2x.png'">
<div style="font-size: 1.1rem; margin-bottom: 10px;">${dominantDesc}</div>
<div style="font-size: 1.3rem; font-weight: bold; margin-bottom: 10px;">
${maxTemp}° / ${minTemp}°
</div>
<div style="font-size: 0.9rem; opacity: 0.9;">
💧 ${avgHumidity}% | 💨 ${avgWind} م/ث
</div>

</div>
`;
});

html += `</div></div>`;
document.getElementById("dailyForecast").innerHTML = html;
}

function displayError(message) {
const html = `<div class="error">❌ ${message}</div>`;
document.getElementById("mainWeather").innerHTML = html;
document.getElementById("hourlyForecast").innerHTML = "";
document.getElementById("dailyForecast").innerHTML = "";
}

function showLoading(show) {
document.getElementById("loading").style.display = show ? "block" : "none";
}

// نمایش آب‌وهوای شهرهای مهم جهان
async function loadWorldCities() {
let html = "";
for (const city of worldCities) {
try {

const data = await fetchCurrentWeather(city.query);
const temp = Math.round(data.main.temp);
const icon = data.weather[0].icon;
const iconUrl = getSmallWeatherIcon(icon);

html += `
<div class="city-card">
<h3>${city.name}</h3>
<p style="opacity: 0.8; margin-bottom: 10px;">${city.country}</p>
<img class="weather-icon-small" src="${iconUrl}" alt="${data.weather[0].description}" onerror="this.src='https://openweathermap.org/img/wn/01d.png'">
<div style="font-size: 1.5rem; font-weight: bold;">${temp}°C</div>
<div style="font-size: 0.9rem; opacity: 0.9;">${data.weather[0].description}</div>
</div>
`;
} catch (error) {
html += `
<div class="city-card" style="background: linear-gradient(45deg, #ddd, #bbb); color: #666;">
<h3>${city.name}</h3>
<p>خطا در دریافت اطلاعات</p>
</div>

`;
}
}
document.getElementById("worldCities").innerHTML = html;
}

// بارگذاری اولیه
window.addEventListener('load', function() {
loadWorldCities();
// بروزرسانی هر 10 دقیقه
setInterval(loadWorldCities, 600000);
});
</script>
</body>
</html>